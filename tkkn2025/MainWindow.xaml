<Window
    x:Class="tkkn2025.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:gameObjects="clr-namespace:tkkn2025.GameObjects"
    xmlns:local="clr-namespace:tkkn2025"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:settingsModels="clr-namespace:tkkn2025.Settings.Models"
    xmlns:ui="clr-namespace:tkkn2025.UI"
    Title="TKKN 2025"
    Width="1050"
    Height="700"
    Focusable="True"
    KeyDown="Window_KeyDown"
    KeyUp="Window_KeyUp"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*" />
            <ColumnDefinition Width="225" />
        </Grid.ColumnDefinitions>

        <!--  Game Area  -->
        <Grid>
            <Canvas
                Name="GameCanvas"
                Grid.Column="0"
                Background="Black"
                Focusable="True"
                MouseDown="GameCanvas_MouseDown">

                <!--  Start Screen - shown when game is not running  -->


            </Canvas>

            <ui:StartScreen x:Name="StartScreen" Visibility="Visible"/>
            
        </Grid>
        <!--  Settings Panel  -->
        <Border
            Grid.Column="1"
            Padding="10"
            Background="#FF151515">
            <Grid Grid.Column="1">
                <Grid.RowDefinitions>
                    <RowDefinition Height="auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <StackPanel>
                    <Button
                        Name="StartButton"
                        Background="Green"
                        Content="Press SPACE to Start"
                        Foreground="White" />

                    <TextBlock
                        Name="GameTimeText"
                        HorizontalAlignment="Center"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="Time: 0s" />

                    <TextBlock
                        Name="ParticleCountText"
                        HorizontalAlignment="Center"
                        Foreground="White"
                        Text="Particles: 0" />

                    <TextBlock
                        Name="FpsText"
                        HorizontalAlignment="Center"
                        FontWeight="Bold"
                        Foreground="Yellow"
                        Text="FPS: 0" />

                    <!--  Session Stats  -->
                    <TextBlock
                        Margin="0,5,0,0"
                        FontSize="14"
                        FontWeight="Bold"
                        Foreground="White"
                        Text="Session Stats" />

                    <TextBlock
                        Name="SessionStatsText"
                        Margin="0,0,0,10"
                        HorizontalAlignment="Center"
                        FontSize="12"
                        Foreground="LightBlue"
                        Text="No games played yet" />

                    <!--  Music Control  -->
                    <Button
                        Name="MusicToggleButton"
                        Margin="0,5,0,10"
                        Background="DarkSlateBlue"
                        Click="MusicToggleButton_Click"
                        Content="🎵 Music: ON"
                        Foreground="White" />

                </StackPanel>

                <ScrollViewer Grid.Row="1" VerticalScrollBarVisibility="Auto">

                    <StackPanel>

                        <!--  Game Settings  -->
                        <StackPanel>

                            <!--  Header  -->
                            <TextBlock
                                Margin="0,5,0,0"
                                FontSize="14"
                                FontWeight="Bold"
                                Foreground="White"
                                Text="Game Settings" />

                            <!--  Settings Management Buttons  -->
                            <StackPanel
                                Margin="0,5,0,0"
                                HorizontalAlignment="Center"
                                Orientation="Horizontal">
                                <Button
                                    Name="SaveSettingsButton"
                                    Width="60"
                                    Padding="5,2"
                                    Background="DarkGray"
                                    Click="SaveSettingsButton_Click"
                                    Content="Save"
                                    FontSize="10"
                                    Foreground="White" />
                                <Button
                                    Name="LoadSettingsButton"
                                    Width="60"
                                    Margin="5,0,0,0"
                                    Padding="5,2"
                                    Background="DarkGray"
                                    Click="LoadSettingsButton_Click"
                                    Content="Load"
                                    FontSize="10"
                                    Foreground="White" />
                                <Button
                                    Name="ResetSettingsButton"
                                    Width="60"
                                    Margin="5,0,0,0"
                                    Padding="5,2"
                                    Background="DarkGray"
                                    Click="ResetSettingsButton_Click"
                                    Content="Default"
                                    FontSize="10"
                                    Foreground="White" />
                            </StackPanel>

                            <!--  Config Status  -->
                            <TextBlock
                                Name="ConfigStatusText"
                                Margin="0,5,0,10"
                                HorizontalAlignment="Center"
                                FontSize="10"
                                Foreground="LightGray"
                                Text="" />

                        </StackPanel>


                        <StackPanel DataContext="{Binding}">

                            <!--  Basic Settings  -->
                            <Expander Foreground="White" IsExpanded="False">
                                <Expander.Header>
                                    <TextBlock FontSize="14" Text="Basic Settings" />
                                </Expander.Header>

                                <settingsModels:SettingList DataContext="{Binding GameSettings.BasicSettings}" />
                            </Expander>

                            <!--  Particle Settings  -->
                            <Expander Foreground="White" IsExpanded="False">
                                <Expander.Header>
                                    <TextBlock FontSize="14" Text="Particle Settings" />
                                </Expander.Header>

                                <settingsModels:SettingList DataContext="{Binding GameSettings.ParticleSettings}" />
                            </Expander>

                            <!--  PowerUp Settings  -->
                            <Expander Foreground="White" IsExpanded="False">
                                <Expander.Header>
                                    <TextBlock FontSize="14" Text="Power-Up Settings" />
                                </Expander.Header>

                                <settingsModels:SettingList DataContext="{Binding GameSettings.PowerUpSettings}" />
                            </Expander>


                        </StackPanel>
                    </StackPanel>
                </ScrollViewer>
            </Grid>
        </Border>
    </Grid>
</Window>
